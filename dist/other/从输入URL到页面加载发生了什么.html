<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从输入URL到页面加载发生了什么 | web_翔的进阶之路</title>
    <meta name="description" content="夜空中最闪亮的星！！！">
    <link rel="icon" href="./public/logo.ico">
    
    <link rel="preload" href="/study/assets/css/0.styles.9829664d.css" as="style"><link rel="preload" href="/study/assets/js/app.b8af4fc8.js" as="script"><link rel="preload" href="/study/assets/js/2.592151bd.js" as="script"><link rel="preload" href="/study/assets/js/30.d05c5052.js" as="script"><link rel="prefetch" href="/study/assets/js/10.48e2b885.js"><link rel="prefetch" href="/study/assets/js/11.8ed0c851.js"><link rel="prefetch" href="/study/assets/js/12.1645b07d.js"><link rel="prefetch" href="/study/assets/js/13.bceef8f7.js"><link rel="prefetch" href="/study/assets/js/14.b47ba695.js"><link rel="prefetch" href="/study/assets/js/15.14563377.js"><link rel="prefetch" href="/study/assets/js/16.2eb1f60a.js"><link rel="prefetch" href="/study/assets/js/17.30342caa.js"><link rel="prefetch" href="/study/assets/js/18.5fd616d7.js"><link rel="prefetch" href="/study/assets/js/19.f59cfb1a.js"><link rel="prefetch" href="/study/assets/js/20.44857bf3.js"><link rel="prefetch" href="/study/assets/js/21.56c0ba0f.js"><link rel="prefetch" href="/study/assets/js/22.4e9882dc.js"><link rel="prefetch" href="/study/assets/js/23.47623bfd.js"><link rel="prefetch" href="/study/assets/js/24.d96ef82d.js"><link rel="prefetch" href="/study/assets/js/25.c16dc40a.js"><link rel="prefetch" href="/study/assets/js/26.9a44399d.js"><link rel="prefetch" href="/study/assets/js/27.bea6cb64.js"><link rel="prefetch" href="/study/assets/js/28.771a7827.js"><link rel="prefetch" href="/study/assets/js/29.6950a516.js"><link rel="prefetch" href="/study/assets/js/3.34b1aa0d.js"><link rel="prefetch" href="/study/assets/js/31.a0230683.js"><link rel="prefetch" href="/study/assets/js/32.6e7d3d79.js"><link rel="prefetch" href="/study/assets/js/33.476f9e7e.js"><link rel="prefetch" href="/study/assets/js/34.eba02080.js"><link rel="prefetch" href="/study/assets/js/35.e4f96105.js"><link rel="prefetch" href="/study/assets/js/36.0e0b04b1.js"><link rel="prefetch" href="/study/assets/js/4.da04f69e.js"><link rel="prefetch" href="/study/assets/js/5.0acdbf1f.js"><link rel="prefetch" href="/study/assets/js/6.82ae3702.js"><link rel="prefetch" href="/study/assets/js/7.38f3ede8.js"><link rel="prefetch" href="/study/assets/js/8.e2f58e54.js"><link rel="prefetch" href="/study/assets/js/9.3594e81f.js">
    <link rel="stylesheet" href="/study/assets/css/0.styles.9829664d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study/" class="home-link router-link-active"><!----> <span class="site-name">web_翔的进阶之路</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/js/" class="nav-link">js学习</a></div><div class="nav-item"><a href="/study/css/" class="nav-link">CSS学习</a></div><div class="nav-item"><a href="/study/vue/" class="nav-link">Vue学习</a></div><div class="nav-item"><a href="/study/other/" class="nav-link router-link-active">其他知识学习</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/js/" class="nav-link">js学习</a></div><div class="nav-item"><a href="/study/css/" class="nav-link">CSS学习</a></div><div class="nav-item"><a href="/study/vue/" class="nav-link">Vue学习</a></div><div class="nav-item"><a href="/study/other/" class="nav-link router-link-active">其他知识学习</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端其他知识学习</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/other/git分布式管理系统学习.html" class="sidebar-link">Git 分布式管理系统学习</a></li><li><a href="/study/other/iaas、paas、saas学习.html" class="sidebar-link">IAAS、PAAS、SAAS学习</a></li><li><a href="/study/other/nginx代理服务的配置.html" class="sidebar-link">nginx</a></li><li><a href="/study/other/npm包管理工具学习.html" class="sidebar-link">NPM 包管理工具学习</a></li><li><a href="/study/other/从输入URL到页面加载发生了什么.html" class="active sidebar-link">从输入URL到页面加载发生了什么</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/other/从输入URL到页面加载发生了什么.html#主要过程" class="sidebar-link">主要过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/other/从输入URL到页面加载发生了什么.html#dns解析" class="sidebar-link">DNS解析</a></li><li class="sidebar-sub-header"><a href="/study/other/从输入URL到页面加载发生了什么.html#tcp连接" class="sidebar-link">TCP连接</a></li><li class="sidebar-sub-header"><a href="/study/other/从输入URL到页面加载发生了什么.html#发送http请求" class="sidebar-link">发送HTTP请求</a></li><li class="sidebar-sub-header"><a href="/study/other/从输入URL到页面加载发生了什么.html#服务器处理请求并返回http报文" class="sidebar-link">服务器处理请求并返回HTTP报文</a></li><li class="sidebar-sub-header"><a href="/study/other/从输入URL到页面加载发生了什么.html#浏览器解析和渲染页面" class="sidebar-link">浏览器解析和渲染页面</a></li><li class="sidebar-sub-header"><a href="/study/other/从输入URL到页面加载发生了什么.html#释放连接" class="sidebar-link">释放连接</a></li></ul></li></ul></li><li><a href="/study/other/20190911心得体会.html" class="sidebar-link">总结</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="从输入url到页面加载发生了什么"><a href="#从输入url到页面加载发生了什么" class="header-anchor">#</a> 从输入URL到页面加载发生了什么</h1> <h2 id="主要过程"><a href="#主要过程" class="header-anchor">#</a> 主要过程</h2> <ol><li>DNS解析</li> <li>TCP连接</li> <li>发送HTTP请求</li> <li>服务器处理请求并返回HTTP报文</li> <li>浏览器解析渲染页面</li> <li>释放连接</li></ol> <h3 id="dns解析"><a href="#dns解析" class="header-anchor">#</a> DNS解析</h3> <p><strong>DNS解析</strong>：</p> <blockquote><p>输入URL后，需要找到这个URL对应的服务器，为了查询服务器地址，第一步需要实现从网址到对应ip的转换，浏览器首先依次查询自身缓存，系统缓存和路由器缓存的</p></blockquote> <p><strong>DNS查询过程</strong>：</p> <p>1.浏览器查询自身缓存 --&gt; 系统缓存 --&gt; 路由缓存
2.查询本地host文件
3.发送域名解析请求查询DNS服务器：</p> <ul><li>在本地域名服务器中查询 www.baidu.com</li> <li>向根域名服务器发送查询请求</li> <li>向com域名服务器查询</li> <li>向baidu.com域名服务器查询</li> <li>查询到结果</li></ul> <p>4.缓存到本地，以供下次查询</p> <p><strong>域名系统DNS</strong>：</p> <p>1.DNS能够将互联网的主机名转换成IP地址，为了减少开销，DNS是以UDP用户数据报的形式发送解析请求的。
2.域名解析过程中有两种查询方式：</p> <ul><li>递归查询：
举个例子：客户端向服务器A发查询请求，若未找到则由服务器A向服务器B发起查询请求，未找到再由服务器B向服务器C发起查询请求，以此类推，最后将查询结果一次经过服务器C、服务器B、服务器A返回给客户端的查询模式。</li> <li>迭代查询：
举个例子：服务器A向服务器B发送查询请求，若未找到则将查询结果返回给服务器A，由服务器A继续向服务器C发送查询请求，以此类推，最后得到查询结果的查询模式。</li></ul> <p>2.本地域名服务器向根域名服务器的查询方式一般采用迭代查询</p> <h3 id="tcp连接"><a href="#tcp连接" class="header-anchor">#</a> TCP连接</h3> <p><strong>TCP连接</strong>：</p> <blockquote><p>浏览器通过随机端口向服务器指定端口发起TCP连接请求，通过运输层，网络层，数据链路层，物理层到达服务器，经过三次握手后建立TCP连接</p></blockquote> <p><strong>五层协议体系结构</strong>：</p> <p>1.应用层：以报文的方式通过应用进程间的交互完成特定网络服务。常见的应用层协议有域名系统DNS，HTTP协议等。
2.运输层：为应用层的报文段或用户数据报提供传输服务。运输层的协议有TCP协议和UDP协议。
3.网络层：将运输层的报文段或用书数据报封装成分组，以分组（又称IP数据报）的形式在网络中转发。
4.数据链路层：将网络层的IP数据报封装成帧，在两个相邻节点（路由器或其他IP数据报）的形式在网络中转发。
5.物理层：在链接各种计算机的传输媒体之间传输数据比特流</p> <p><strong>TCP和UDP</strong>：</p> <p>1.TCP：提供面向连接的、可靠的数据传输服务。以报文段的形式传播。
2.UDP：提供无连接、尽最大努力的数据传输服务。以用户数据报的形式传播。</p> <p><strong>三次握手</strong>：</p> <p>1.第一次握手：客户端进程发送连接请求报文段给服务器，客户端进程进入sync-sent（同步发送）状态
2.第二次握手：服务器收到请求报文段，如果同意建立连接则向客户端发送确认报文段，服务器进程进入sync-rcvd（同步收到）状态
3.第三次握手：客户端进程收到服务器的确认后，再给服务器进程发送确认</p> <blockquote><p>第三次握手的原因是为了防止已失效的连接请求报文段突然又传回给服务器进程从而产生错误。假设客户端发送第一次连接请求由于网络滞留了，于是客户端又发送了一次请求并成功建立连接，数据传输完毕后就释放了连接。在释放连接后的某个时间段内客户端的第一次报文段又到达了服务器并被服务器进程确认，如果没有第三次握手，则服务器会一直等待客户端发送数据，从而浪费许多资源。</p></blockquote> <h3 id="发送http请求"><a href="#发送http请求" class="header-anchor">#</a> 发送HTTP请求</h3> <p><strong>发送HTTP请求</strong>：</p> <blockquote><p>三次握手后，就可以传输数据了，客户端将要发送的内容构建成HTTP请求报文并封装在TCP包中，通过TCP协议发送到服务器指定端口</p></blockquote> <p><strong>HTTP请求报文格式</strong>：</p> <p>1.HTTP请求报文一般由请求头组成，请求头用来说明报文主体的一些信息。请求报文和响应报文的区别就是开始行的不同。
2.请求报文中的开始行成为请求行，HTTP请求行只有三个内容，即方法、URL和HTTP版本。
3.请求方法有：</p> <ul><li>GET 请求读取URL中的信息</li> <li>POST 向指定资源提交数据，如提测表单，上传文件等</li> <li>HEAD 请求URL所标志信息的首部</li> <li>DELETE 请求服务器删除指定的页面</li> <li>OPTIONS 允许客户端查看服务器性能</li> <li>PUT 用从客户端向服务器传送的数据来替换指定文档的内容</li> <li>CONNECT 用于代理服务器</li> <li>TRACK 用于测试和诊断</li></ul> <h3 id="服务器处理请求并返回http报文"><a href="#服务器处理请求并返回http报文" class="header-anchor">#</a> 服务器处理请求并返回HTTP报文</h3> <p><strong>HTTP响应报文格式</strong>：</p> <p>1.HTTP响应报文一般由状态行，响应头和响应报文组成，响应头用来说明报文主体的一些信息。
2.响应报文中的开始行称为状态行，HTTP状态行只有三个内容，即HTTP版本，状态码和解释状态码的简单短语。
3.状态码含义：</p> <ul><li>1xx 服务器收到请求</li> <li>2xx 请求成功，开始处理</li> <li>3xx 重定向</li> <li>4xx 客户端错误</li> <li>5xx 服务器错误</li></ul> <h3 id="浏览器解析和渲染页面"><a href="#浏览器解析和渲染页面" class="header-anchor">#</a> 浏览器解析和渲染页面</h3> <p><strong>浏览器解析和渲染页面</strong>：</p> <blockquote><p>浏览器根据拿到的响应报文进行解析和页面的渲染</p></blockquote> <p>1.构建DOM树：HTML文档会被解析成一颗以document为根的DOM树，解析过程中如果遇到JavaScript，则会暂停解析并传输下载相应的文件造成阻塞，故推荐将JavaScript脚本放在HTML文件的后面。
2.构建CSSOM：浏览器根据外部样式，内部样式和内联样式来解析CSS，构建CSSOM树。
3.构建渲染树和布局：DOM树和CSSOM树构建完毕后会融合成渲染树，然后浏览器会确认页面各元素的位置。
4.页面绘制和优化：浏览器根据布局结果进行页面的绘制，并优化页面内容，减小CPU消耗。</p> <h3 id="释放连接"><a href="#释放连接" class="header-anchor">#</a> 释放连接</h3> <p><strong>TCP四次挥手</strong>：</p> <p>1.第一次挥手：客户端发送释放连接请求，不再发送数据，但还可以接收数据
2.第二次挥手：服务器收到连接释放的报文段后即发出确认，这样从客户端到服务器的连接就释放了
3.第三次挥手：等所有数据传输完毕后，服务器发送终止请求给客户端，标识不再穿输数据给客户端
4.第四次挥手：最后客户端收到服务端关闭请求后发送确认报文段，完成四次挥手</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/study/other/npm包管理工具学习.html" class="prev">NPM 包管理工具学习</a></span> <span class="next"><a href="/study/other/20190911心得体会.html">总结</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/study/assets/js/app.b8af4fc8.js" defer></script><script src="/study/assets/js/2.592151bd.js" defer></script><script src="/study/assets/js/30.d05c5052.js" defer></script>
  </body>
</html>
